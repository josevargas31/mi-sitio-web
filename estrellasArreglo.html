<!DOCTYPE html>
<html>
<head>
    <style>
        .barra-container {
            width: 100px;
            background-color: #f3f3f3;
            color: #000;
            height: 20px;
            border: 1px solid #000;
            position: relative;
            overflow: hidden;
        }
        .barra {
            height: 100%;
            background-color: #4CAF50;
            width: 100%;
            position: absolute;
            transition: width 2s;
        }
        .tabla-calificaciones {
            display: none;
            border: solid 1px rgb(255, 164, 28);
            width: 250px;
            height: 200px;

        }
        .container {
  display: flex;
  flex-direction: row;
margin: 5px;

}

.barra-container {
  display: flex;
  align-items: center;
  margin-right: 10px;
}
  .box-estrellas{
    display: flex;
    flex-direction: row;
    /* background-color: #75e4fc; */
  }

  span {
    padding: 0 5px 0 5px;
  }
    </style>
<link rel="stylesheet" href="icons/all.css">
</head>
<body>

<div class="box-estrellas" onmouseover="mostrarTabla()" onmouseout="ocultarTabla()">
        <span class="califica" id="puntuacion" >4.7 </span>
        <div class="estrella">
            <i id="start1"></i>
        </div>
        <div class="estrella">
            <i id="start2"></i>
        </div>
        <div class="estrella">
            <i id="start3"></i>
        </div>
        <div class="estrella">
            <i id="start4"></i>
        </div>
        <div class="estrella">
            <i id="start5"></i>
        </div>
    </div>
    <!--  -->


<div class="tabla-calificaciones" id="tabla">

<div class="container">
        <span>5 estrellas </span>
        <div class="barra-container">
            <div id="barra5" class="barra"></div>
        </div>
        <span id="porcentaje5"></span>
</div>

<div class="container">
        <span>4 estrellas </span>
        <div class="barra-container">
            <div id="barra4" class="barra"></div>
        </div>
        <span id="porcentaje4"></span>
</div>
<div class="container">
        <span>3 estrellas </span> 
        <div class="barra-container">
            <div id="barra3" class="barra"></div>
        </div>
        <span id="porcentaje3"></span>
</div>
<div class="container">
        <span>2 estrellas </span>
        <div class="barra-container">
            <div id="barra2" class="barra"></div>
        </div>
        <span id="porcentaje2"></span>
</div>
<div class="container">
        <span>1 estrella </span>
        <div class="barra-container">
            <div id="barra1" class="barra"></div>
        </div>
        <span id="porcentaje1"></span>
</div>
    </div>



<script>
    let calificaciones = {
        "5 estrellas": 3,
        "4 estrellas": 13,
        "3 estrellas": 44,
        "2 estrellas": 31,
        "1 estrella": 61
    };

    // Calcular el total de calificaciones
    let totalCalificaciones = 0;
    for (let calificacion in calificaciones) {
        totalCalificaciones += calificaciones[calificacion];
    }

    // Calcular el porcentaje de cada calificaciÃ³n
    for (let calificacion in calificaciones) {
        let porcentaje = (calificaciones[calificacion] / totalCalificaciones) * 100;
        document.getElementById('barra' + calificacion[0]).style.width = porcentaje + '%';
        document.getElementById('porcentaje' + calificacion[0]).innerText = Math.round(porcentaje) + '%';
    }

    function mostrarTabla() {
        document.getElementById('tabla').style.display = 'block';
    }

    function ocultarTabla() {
        document.getElementById('tabla').style.display = 'none';
    }
    let start1 = document.getElementById("start1")
let start2 = document.getElementById("start2")
let start3 = document.getElementById("start3")
let start4 = document.getElementById("start4")
let start5 = document.getElementById("start5")
let puntuacion = document.getElementById("puntuacion").innerText = 3
    
    if(puntuacion >= 0 && puntuacion <= 0.2) {
        start1.setAttribute("class", "estrella fa-regular fa-star")
        start2.setAttribute("class", "estrella fa-regular fa-star")
        start3.setAttribute("class", "estrella fa-regular fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 0.3 && puntuacion <= 0.7) {
        start1.setAttribute("class", "estrella fa-solid fa-star-half-stroke")
        start2.setAttribute("class", "estrella fa-regular fa-star")
        start3.setAttribute("class", "estrella fa-regular fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 0.8 && puntuacion <= 1.2) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-regular fa-star")
        start3.setAttribute("class", "estrella fa-regular fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 1.3 && puntuacion <= 1.7){
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star-half-stroke")
        start3.setAttribute("class", "estrella fa-regular fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 1.8 && puntuacion <= 2.2) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-regular fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 2.3 && puntuacion <= 2.7) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star-half-stroke")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 2.8 && puntuacion <= 3.2){
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star")
        start4.setAttribute("class", "estrella fa-regular fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 3.3 && puntuacion <= 3.7) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star")
        start4.setAttribute("class", "estrella fa-solid fa-star-half-stroke")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 3.8 && puntuacion <= 4.2) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star")
        start4.setAttribute("class", "estrella fa-solid fa-star")
        start5.setAttribute("class", "estrella fa-regular fa-star")
    }
    else if(puntuacion >= 4.3 && puntuacion <= 4.7) {
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star")
        start4.setAttribute("class", "estrella fa-solid fa-star")
        start5.setAttribute("class", "estrella fa-solid fa-star-half-stroke")
    }
    else if(puntuacion >= 4.8 && puntuacion <= 5){
        start1.setAttribute("class", "estrella fa-solid fa-star")
        start2.setAttribute("class", "estrella fa-solid fa-star")
        start3.setAttribute("class", "estrella fa-solid fa-star")
        start4.setAttribute("class", "estrella fa-solid fa-star")
        start5.setAttribute("class", "estrella fa-solid fa-star")
    }

</script>

</body>
</html>